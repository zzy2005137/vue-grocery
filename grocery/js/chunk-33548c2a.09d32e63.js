(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33548c2a"],{"057f":function(e,t,o){var r=o("fc6a"),n=o("241c").f,c={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(e){try{return n(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==c.call(e)?a(e):n(r(e))}},"1fe7":function(e,t,o){},"428f":function(e,t,o){var r=o("da84");e.exports=r},"746f":function(e,t,o){var r=o("428f"),n=o("5135"),c=o("e5383"),i=o("9bf2").f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});n(t,e)||i(t,e,{value:c.f(e)})}},"8a4b":function(e,t,o){"use strict";o("1fe7")},a291:function(e,t,o){"use strict";o.r(t);var r=o("7a23");Object(r["pushScopeId"])("data-v-8d014d0a");var n=Object(r["createElementVNode"])("h1",null,"添加新商品",-1);function c(e,t,o,c,i,a){var l=Object(r["resolveComponent"])("AddForm");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[n,Object(r["createVNode"])(l)],64)}Object(r["popScopeId"])();o("b0c0"),o("a4d3"),o("e01a");Object(r["pushScopeId"])("data-v-080ecbe2");var i=Object(r["createElementVNode"])("i",{class:"el-icon-plus"},null,-1),a=["src"],l=Object(r["createTextVNode"])("上传"),u=Object(r["createTextVNode"])("重置");function s(e,t,o,n,c,s){var f=Object(r["resolveComponent"])("el-upload"),d=Object(r["resolveComponent"])("el-dialog"),m=Object(r["resolveComponent"])("el-input"),b=Object(r["resolveComponent"])("el-form-item"),p=Object(r["resolveComponent"])("el-option"),g=Object(r["resolveComponent"])("el-select"),h=Object(r["resolveComponent"])("el-form"),v=Object(r["resolveComponent"])("el-button"),O=Object(r["resolveDirective"])("loading");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(f,{action:"#","list-type":"picture-card","file-list":c.fileList,"on-remove":s.handleRemove,"on-change":s.loadImg,"auto-upload":!1,"http-request":s.myupload,ref:"upload",class:"img-upload",limit:"1"},{default:Object(r["withCtx"])((function(){return[i]})),_:1},8,["file-list","on-remove","on-change","http-request"]),Object(r["createVNode"])(d,{modelValue:c.dialogVisible,"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.dialogVisible=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("img",{width:"100%",src:c.dialogImageUrl,alt:""},null,8,a)]})),_:1},8,["modelValue"]),Object(r["createVNode"])(h,{model:c.ruleForm,rules:c.rules,ref:"ruleForm","label-width":"100px",class:"demo-ruleForm"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{label:"商品名称",prop:"name"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:c.ruleForm.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.ruleForm.name=e})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(b,{label:"商品简介",prop:"description"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:c.ruleForm.description,"onUpdate:modelValue":t[2]||(t[2]=function(e){return c.ruleForm.description=e})},null,8,["modelValue"])]})),_:1}),c.categories?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,label:"商品类别",prop:"category"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{modelValue:c.ruleForm.category,"onUpdate:modelValue":t[3]||(t[3]=function(e){return c.ruleForm.category=e}),placeholder:"请选择商品类别"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(c.categories,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:t,label:e,value:e},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1},8,["model","rules"]),Object(r["withDirectives"])(Object(r["createVNode"])(v,{type:"primary",onClick:s.submitUpload,"element-loading-text":"上传中"},{default:Object(r["withCtx"])((function(){return[l]})),_:1},8,["onClick"]),[[O,c.fullscreenLoading,void 0,{fullscreen:!0,lock:!0}]]),Object(r["createVNode"])(v,{onClick:t[4]||(t[4]=function(e){return s.resetForm("ruleForm")})},{default:Object(r["withCtx"])((function(){return[u]})),_:1})],64)}Object(r["popScopeId"])();var f=o("4995"),d=o("c72e"),m=o.n(d),b={name:"addForm",data:function(){return{ruleForm:{name:"",description:"",category:"",img:null},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{message:"长度在 3 到 5 个字符",trigger:"blur"}],category:[{required:!0,message:"请选择商品类别",trigger:"change"}]},categories:["干货","特产","其他"],dialogImageUrl:"",dialogVisible:!1,fullscreenLoading:!1,fileList:[]}},methods:{handleRemove:function(e,t){console.log(e)},submitUpload:function(){this.$refs.upload.submit()},loadImg:function(e,t){console.log("handle img"),this.ruleForm.img=e.raw,console.log(this.ruleForm.img)},showSuccessMessage:function(e){Object(f["a"])({showClose:!0,type:"success",message:e})},showErrorMessage:function(e){Object(f["a"])({showClose:!0,type:"error",message:e})},myupload:function(){""!==this.ruleForm.name&&""!==this.ruleForm.category?(this.fullscreenLoading=!0,this.uploadObj()):this.showErrorMessage("信息不完整")},uploadObj:function(){var e=this,t=new m.a.File(this.ruleForm.img.name,this.ruleForm.img);t.save().then((function(t){console.log("图片保存完成。URL：".concat(t.url()));var o=m.a.Object.extend("item"),r=new o;r.set("name",e.ruleForm.name),r.set("description",e.ruleForm.description),r.set("category",e.ruleForm.category),r.add("img",t),r.save().then((function(t){e.showSuccessMessage("商品信息上传成功"),e.fullscreenLoading=!1,e.resetForm("ruleForm")}),(function(t){console.log(t),e.fullscreenLoading=!1,e.showErrorMessage("上传失败: "+t)}))}),(function(t){console.log(t),e.fullscreenLoading=!1,e.showErrorMessage("上传失败: "+t)}))},resetForm:function(e){this.$refs[e].resetFields(),this.fileList=[]}},created:function(){}},p=(o("de2a"),o("d959")),g=o.n(p);const h=g()(b,[["render",s],["__scopeId","data-v-080ecbe2"]]);var v=h,O={name:"addItem",components:{AddForm:v}};o("8a4b");const j=g()(O,[["render",c],["__scopeId","data-v-8d014d0a"]]);t["default"]=j},a4d3:function(e,t,o){"use strict";var r=o("23e7"),n=o("da84"),c=o("d066"),i=o("c430"),a=o("83ab"),l=o("4930"),u=o("d039"),s=o("5135"),f=o("e8b5"),d=o("861d"),m=o("d9b5"),b=o("825a"),p=o("7b0b"),g=o("fc6a"),h=o("a04b"),v=o("577e"),O=o("5c6c"),j=o("7c73"),y=o("df75"),w=o("241c"),F=o("057f"),V=o("7418"),S=o("06cf"),C=o("9bf2"),N=o("d1e7"),k=o("9112"),x=o("6eeb"),E=o("5692"),_=o("f772"),I=o("d012"),L=o("90e3"),B=o("b622"),P=o("e5383"),U=o("746f"),M=o("d44e"),q=o("69f3"),J=o("b727").forEach,T=_("hidden"),$="Symbol",D="prototype",R=B("toPrimitive"),A=q.set,Q=q.getterFor($),W=Object[D],z=n.Symbol,G=c("JSON","stringify"),H=S.f,K=C.f,X=F.f,Y=N.f,Z=E("symbols"),ee=E("op-symbols"),te=E("string-to-symbol-registry"),oe=E("symbol-to-string-registry"),re=E("wks"),ne=n.QObject,ce=!ne||!ne[D]||!ne[D].findChild,ie=a&&u((function(){return 7!=j(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a}))?function(e,t,o){var r=H(W,t);r&&delete W[t],K(e,t,o),r&&e!==W&&K(W,t,r)}:K,ae=function(e,t){var o=Z[e]=j(z[D]);return A(o,{type:$,tag:e,description:t}),a||(o.description=t),o},le=function(e,t,o){e===W&&le(ee,t,o),b(e);var r=h(t);return b(o),s(Z,r)?(o.enumerable?(s(e,T)&&e[T][r]&&(e[T][r]=!1),o=j(o,{enumerable:O(0,!1)})):(s(e,T)||K(e,T,O(1,{})),e[T][r]=!0),ie(e,r,o)):K(e,r,o)},ue=function(e,t){b(e);var o=g(t),r=y(o).concat(be(o));return J(r,(function(t){a&&!fe.call(o,t)||le(e,t,o[t])})),e},se=function(e,t){return void 0===t?j(e):ue(j(e),t)},fe=function(e){var t=h(e),o=Y.call(this,t);return!(this===W&&s(Z,t)&&!s(ee,t))&&(!(o||!s(this,t)||!s(Z,t)||s(this,T)&&this[T][t])||o)},de=function(e,t){var o=g(e),r=h(t);if(o!==W||!s(Z,r)||s(ee,r)){var n=H(o,r);return!n||!s(Z,r)||s(o,T)&&o[T][r]||(n.enumerable=!0),n}},me=function(e){var t=X(g(e)),o=[];return J(t,(function(e){s(Z,e)||s(I,e)||o.push(e)})),o},be=function(e){var t=e===W,o=X(t?ee:g(e)),r=[];return J(o,(function(e){!s(Z,e)||t&&!s(W,e)||r.push(Z[e])})),r};if(l||(z=function(){if(this instanceof z)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,t=L(e),o=function(e){this===W&&o.call(ee,e),s(this,T)&&s(this[T],t)&&(this[T][t]=!1),ie(this,t,O(1,e))};return a&&ce&&ie(W,t,{configurable:!0,set:o}),ae(t,e)},x(z[D],"toString",(function(){return Q(this).tag})),x(z,"withoutSetter",(function(e){return ae(L(e),e)})),N.f=fe,C.f=le,S.f=de,w.f=F.f=me,V.f=be,P.f=function(e){return ae(B(e),e)},a&&(K(z[D],"description",{configurable:!0,get:function(){return Q(this).description}}),i||x(W,"propertyIsEnumerable",fe,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:z}),J(y(re),(function(e){U(e)})),r({target:$,stat:!0,forced:!l},{for:function(e){var t=v(e);if(s(te,t))return te[t];var o=z(t);return te[t]=o,oe[o]=t,o},keyFor:function(e){if(!m(e))throw TypeError(e+" is not a symbol");if(s(oe,e))return oe[e]},useSetter:function(){ce=!0},useSimple:function(){ce=!1}}),r({target:"Object",stat:!0,forced:!l,sham:!a},{create:se,defineProperty:le,defineProperties:ue,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:me,getOwnPropertySymbols:be}),r({target:"Object",stat:!0,forced:u((function(){V.f(1)}))},{getOwnPropertySymbols:function(e){return V.f(p(e))}}),G){var pe=!l||u((function(){var e=z();return"[null]"!=G([e])||"{}"!=G({a:e})||"{}"!=G(Object(e))}));r({target:"JSON",stat:!0,forced:pe},{stringify:function(e,t,o){var r,n=[e],c=1;while(arguments.length>c)n.push(arguments[c++]);if(r=t,(d(t)||void 0!==e)&&!m(e))return f(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!m(t))return t}),n[1]=t,G.apply(null,n)}})}z[D][R]||k(z[D],R,z[D].valueOf),M(z,$),I[T]=!0},ae3c:function(e,t,o){},de2a:function(e,t,o){"use strict";o("ae3c")},e01a:function(e,t,o){"use strict";var r=o("23e7"),n=o("83ab"),c=o("da84"),i=o("5135"),a=o("861d"),l=o("9bf2").f,u=o("e893"),s=c.Symbol;if(n&&"function"==typeof s&&(!("description"in s.prototype)||void 0!==s().description)){var f={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new s(e):void 0===e?s():s(e);return""===e&&(f[t]=!0),t};u(d,s);var m=d.prototype=s.prototype;m.constructor=d;var b=m.toString,p="Symbol(test)"==String(s("test")),g=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=b.call(e);if(i(f,e))return"";var o=p?t.slice(7,-1):t.replace(g,"$1");return""===o?void 0:o}}),r({global:!0,forced:!0},{Symbol:d})}},e5383:function(e,t,o){var r=o("b622");t.f=r}}]);
//# sourceMappingURL=chunk-33548c2a.09d32e63.js.map